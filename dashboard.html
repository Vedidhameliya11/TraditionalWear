<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard | TraditionWear</title>
  <link rel="stylesheet" href="dashboard.css">
  <script>
    function showDashboard() {
      const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
      const users = JSON.parse(localStorage.getItem("users")) || [];

      // Check if anyone is logged in
      if (!loggedInUser) {
        alert("Please log in first!");
        window.location.href = "login.html";
        return;
      }

      // Welcome message
      document.getElementById("welcome").innerText = "Welcome, " + loggedInUser.fullname + "!";

      // Show all user data
      if (users.length === 0) {
        document.getElementById("userTable").innerHTML = "<p>No users registered yet.</p>";
        return;
      }

      let tableHTML = `
        <table border="1" cellpadding="10" cellspacing="0">
          <tr style="background-color:#f2f2f2;">
            <th>Full Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Course</th>
          </tr>
      `;

      users.forEach(u => {
        tableHTML += `
          <tr>
            <td>${u.fullname}</td>
            <td>${u.email}</td>
            <td>${u.phone}</td>
            <td>${u.course}</td>
          </tr>
        `;
      });

      tableHTML += "</table>";
      document.getElementById("userTable").innerHTML = tableHTML;
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      alert("Logged out successfully!");
      window.location.href = "login.html";
    }
  </script>
</head>
<body onload="showDashboard()">

  <table width="100%" border="0" cellpadding="10">
    <tr>
      <td align="left">
        <img src="logo1.jpeg" alt="TraditionWear Logo" width="80" height="80">
      </td>
      <td align="center">
        <h1>TraditionWear</h1>
      </td>
      <td align="right">
        <a href="index.html">Home</a> |
        <a href="#" onclick="logout()">Logout</a>
      </td>
    </tr>
  </table>
  <hr>

  <center>
    <h2 id="welcome"></h2>
    <h3>All Registered Users</h3>
    <div id="userTable"></div>
  </center>

</body>
</html>
